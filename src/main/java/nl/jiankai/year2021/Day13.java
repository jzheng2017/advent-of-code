package nl.jiankai.year2021;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class Day13 {
    static List<String> commands = new ArrayList<>();
    static int[][] grid = new int[2000][2000];

    public static void main(String[] args) {
        createGrid();
        part1_2();
    }

    private static void createGrid() {
        for (String line : input) {
            if (line.isEmpty()) continue;
            if (line.startsWith("fold")) {
                commands.add(line);
            } else {
                String[] coord = line.split(",");
                int x = Integer.parseInt(coord[0]);
                int y = Integer.parseInt(coord[1]);
                grid[y][x] = 1;
            }
        }
    }

    static void part1_2() {
        for (String command : commands) {
            String[] commandParsed = command.split("=");
            String axis = commandParsed[0].substring(commandParsed[0].length() - 1);
            int foldPos = Integer.parseInt(commandParsed[1]);
            if (axis.equals("y")) {
                for (int y = foldPos + 1; y < grid.length; y++) {
                    for (int x = 0; x < grid[y].length; x++) {
                        if (grid[y][x] == 0) continue;
                        int newPosition = foldPos - Math.abs(y - foldPos);
                        grid[y][x] = 0;
                        grid[newPosition][x] = 1;
                    }
                }
            } else {
                for (int y = 0; y < grid.length; y++) {
                    for (int x = foldPos + 1; x < grid[y].length; x++) {
                        if (grid[y][x] == 0) continue;

                        int newPosition = foldPos - Math.abs(x - foldPos);
                        grid[y][x] = 0;
                        grid[y][newPosition] = 1;
                    }
                }
            }
        }


        int dots = 0;
        for (int[] line : grid) {
            for (int num : line) {
                if (num == 1) {
                    dots++;
                }
            }
        }

        System.out.println(dots);
    }

    static List<String> input = Arrays.asList(("872,101\n" +
            "202,854\n" +
            "743,192\n" +
            "555,292\n" +
            "972,40\n" +
            "663,740\n" +
            "1266,656\n" +
            "666,844\n" +
            "418,348\n" +
            "1119,857\n" +
            "755,796\n" +
            "845,199\n" +
            "1210,112\n" +
            "78,114\n" +
            "90,98\n" +
            "509,378\n" +
            "1076,445\n" +
            "852,306\n" +
            "1099,889\n" +
            "202,40\n" +
            "1094,101\n" +
            "1240,130\n" +
            "1210,782\n" +
            "422,231\n" +
            "580,782\n" +
            "453,42\n" +
            "232,679\n" +
            "392,812\n" +
            "803,200\n" +
            "597,324\n" +
            "252,334\n" +
            "52,569\n" +
            "336,854\n" +
            "713,324\n" +
            "460,387\n" +
            "638,266\n" +
            "766,317\n" +
            "1094,872\n" +
            "539,833\n" +
            "523,140\n" +
            "609,283\n" +
            "947,441\n" +
            "509,404\n" +
            "725,203\n" +
            "100,334\n" +
            "708,893\n" +
            "619,122\n" +
            "161,374\n" +
            "528,212\n" +
            "1285,450\n" +
            "398,178\n" +
            "108,77\n" +
            "726,824\n" +
            "502,893\n" +
            "753,491\n" +
            "251,312\n" +
            "100,782\n" +
            "1231,794\n" +
            "1207,215\n" +
            "1000,170\n" +
            "199,234\n" +
            "1031,206\n" +
            "1255,836\n" +
            "363,32\n" +
            "55,456\n" +
            "16,294\n" +
            "363,446\n" +
            "542,535\n" +
            "576,504\n" +
            "851,695\n" +
            "465,473\n" +
            "748,242\n" +
            "69,691\n" +
            "1057,234\n" +
            "97,535\n" +
            "542,556\n" +
            "766,437\n" +
            "1083,674\n" +
            "309,42\n" +
            "28,177\n" +
            "1054,5\n" +
            "629,108\n" +
            "519,770\n" +
            "159,705\n" +
            "2,245\n" +
            "808,893\n" +
            "947,324\n" +
            "711,568\n" +
            "681,786\n" +
            "728,210\n" +
            "358,546\n" +
            "162,603\n" +
            "890,652\n" +
            "787,754\n" +
            "234,1\n" +
            "743,894\n" +
            "487,194\n" +
            "460,570\n" +
            "180,276\n" +
            "671,894\n" +
            "851,255\n" +
            "100,560\n" +
            "1111,234\n" +
            "358,0\n" +
            "912,553\n" +
            "236,322\n" +
            "390,110\n" +
            "117,190\n" +
            "959,235\n" +
            "731,312\n" +
            "351,236\n" +
            "1293,768\n" +
            "401,234\n" +
            "681,109\n" +
            "542,471\n" +
            "1099,5\n" +
            "918,684\n" +
            "405,866\n" +
            "768,87\n" +
            "753,851\n" +
            "278,709\n" +
            "820,686\n" +
            "691,212\n" +
            "1308,198\n" +
            "748,738\n" +
            "539,654\n" +
            "1300,844\n" +
            "1062,679\n" +
            "470,858\n" +
            "671,0\n" +
            "397,91\n" +
            "311,507\n" +
            "184,522\n" +
            "1076,893\n" +
            "736,288\n" +
            "733,817\n" +
            "398,5\n" +
            "897,474\n" +
            "619,297\n" +
            "992,40\n" +
            "589,619\n" +
            "539,206\n" +
            "212,302\n" +
            "934,577\n" +
            "361,743\n" +
            "35,229\n" +
            "857,332\n" +
            "870,803\n" +
            "474,406\n" +
            "1275,570\n" +
            "1223,590\n" +
            "1115,863\n" +
            "1015,334\n" +
            "644,205\n" +
            "741,889\n" +
            "904,392\n" +
            "1275,122\n" +
            "951,112\n" +
            "1056,238\n" +
            "251,226\n" +
            "33,604\n" +
            "919,338\n" +
            "25,786\n" +
            "1285,337\n" +
            "658,201\n" +
            "855,682\n" +
            "25,736\n" +
            "644,844\n" +
            "745,122\n" +
            "1115,199\n" +
            "903,318\n" +
            "254,686\n" +
            "179,50\n" +
            "574,606\n" +
            "556,700\n" +
            "649,269\n" +
            "1129,516\n" +
            "2,870\n" +
            "425,499\n" +
            "1183,122\n" +
            "522,674\n" +
            "291,862\n" +
            "686,670\n" +
            "1032,317\n" +
            "330,455\n" +
            "1255,634\n" +
            "295,334\n" +
            "629,786\n" +
            "567,192\n" +
            "621,575\n" +
            "753,359\n" +
            "1058,334\n" +
            "329,772\n" +
            "293,823\n" +
            "997,89\n" +
            "701,283\n" +
            "333,411\n" +
            "1256,145\n" +
            "793,199\n" +
            "735,576\n" +
            "681,444\n" +
            "729,122\n" +
            "15,469\n" +
            "895,766\n" +
            "689,290\n" +
            "1256,649\n" +
            "1228,680\n" +
            "152,449\n" +
            "1069,868\n" +
            "1245,723\n" +
            "63,556\n" +
            "740,332\n" +
            "375,543\n" +
            "85,145\n" +
            "569,453\n" +
            "623,199\n" +
            "872,593\n" +
            "902,64\n" +
            "557,311\n" +
            "1154,122\n" +
            "1131,744\n" +
            "1288,558\n" +
            "84,534\n" +
            "107,456\n" +
            "1220,98\n" +
            "1146,656\n" +
            "1014,672\n" +
            "487,700\n" +
            "1114,834\n" +
            "82,680\n" +
            "1074,322\n" +
            "1014,98\n" +
            "272,357\n" +
            "771,654\n" +
            "1154,772\n" +
            "1283,201\n" +
            "1066,214\n" +
            "1130,276\n" +
            "216,739\n" +
            "999,387\n" +
            "1256,469\n" +
            "904,215\n" +
            "139,92\n" +
            "241,868\n" +
            "415,128\n" +
            "398,341\n" +
            "1150,198\n" +
            "764,98\n" +
            "326,464\n" +
            "981,324\n" +
            "1307,364\n" +
            "877,317\n" +
            "639,425\n" +
            "626,177\n" +
            "646,712\n" +
            "934,317\n" +
            "589,275\n" +
            "912,5\n" +
            "803,150\n" +
            "952,98\n" +
            "740,534\n" +
            "460,212\n" +
            "580,794\n" +
            "1183,589\n" +
            "199,682\n" +
            "1231,808\n" +
            "243,784\n" +
            "313,89\n" +
            "187,624\n" +
            "581,238\n" +
            "216,145\n" +
            "1091,443\n" +
            "652,870\n" +
            "340,887\n" +
            "1238,12\n" +
            "892,546\n" +
            "1148,291\n" +
            "678,280\n" +
            "808,397\n" +
            "1016,812\n" +
            "10,172\n" +
            "22,614\n" +
            "576,390\n" +
            "952,892\n" +
            "279,206\n" +
            "951,863\n" +
            "520,200\n" +
            "1082,42\n" +
            "1144,439\n" +
            "590,658\n" +
            "1277,156\n" +
            "1115,31\n" +
            "507,150\n" +
            "44,686\n" +
            "585,539\n" +
            "227,780\n" +
            "547,438\n" +
            "310,724\n" +
            "1211,740\n" +
            "276,183\n" +
            "932,183\n" +
            "591,450\n" +
            "311,224\n" +
            "930,437\n" +
            "519,124\n" +
            "1094,749\n" +
            "540,302\n" +
            "1007,236\n" +
            "519,238\n" +
            "1048,684\n" +
            "659,252\n" +
            "132,855\n" +
            "467,624\n" +
            "363,441\n" +
            "580,670\n" +
            "495,194\n" +
            "903,110\n" +
            "1308,870\n" +
            "705,448\n" +
            "212,162\n" +
            "1011,320\n" +
            "1163,200\n" +
            "55,58\n" +
            "843,270\n" +
            "1009,557\n" +
            "63,444\n" +
            "1031,878\n" +
            "857,780\n" +
            "22,504\n" +
            "459,140\n" +
            "885,135\n" +
            "1131,274\n" +
            "1034,8\n" +
            "418,98\n" +
            "840,858\n" +
            "1092,145\n" +
            "542,87\n" +
            "1240,824\n" +
            "187,288\n" +
            "1202,313\n" +
            "1280,263\n" +
            "984,376\n" +
            "627,581\n" +
            "1029,877\n" +
            "470,522\n" +
            "227,770\n" +
            "1078,679\n" +
            "741,145\n" +
            "97,311\n" +
            "110,872\n" +
            "232,719\n" +
            "654,464\n" +
            "1285,736\n" +
            "982,467\n" +
            "281,205\n" +
            "605,448\n" +
            "281,17\n" +
            "801,490\n" +
            "977,411\n" +
            "1225,229\n" +
            "262,530\n" +
            "644,50\n" +
            "1038,537\n" +
            "218,145\n" +
            "872,793\n" +
            "1078,623\n" +
            "852,754\n" +
            "468,831\n" +
            "1295,0\n" +
            "214,131\n" +
            "1111,660\n" +
            "579,448\n" +
            "55,836\n" +
            "917,275\n" +
            "22,390\n" +
            "1011,768\n" +
            "244,736\n" +
            "75,582\n" +
            "967,868\n" +
            "291,884\n" +
            "28,215\n" +
            "460,855\n" +
            "1218,738\n" +
            "912,178\n" +
            "360,36\n" +
            "687,199\n" +
            "1119,37\n" +
            "632,280\n" +
            "75,312\n" +
            "1282,177\n" +
            "820,155\n" +
            "134,22\n" +
            "209,638\n" +
            "490,739\n" +
            "1015,112\n" +
            "1083,826\n" +
            "1168,260\n" +
            "689,823\n" +
            "519,322\n" +
            "1255,326\n" +
            "1017,151\n" +
            "755,546\n" +
            "25,450\n" +
            "840,522\n" +
            "679,606\n" +
            "1038,749\n" +
            "147,126\n" +
            "1216,679\n" +
            "1015,247\n" +
            "161,520\n" +
            "672,266\n" +
            "937,731\n" +
            "748,652\n" +
            "1032,633\n" +
            "85,229\n" +
            "1176,355\n" +
            "851,140\n" +
            "842,831\n" +
            "415,416\n" +
            "818,821\n" +
            "572,680\n" +
            "663,630\n" +
            "851,199\n" +
            "624,660\n" +
            "1198,535\n" +
            "900,184\n" +
            "1111,682\n" +
            "818,208\n" +
            "244,214\n" +
            "701,163\n" +
            "291,32\n" +
            "850,570\n" +
            "179,296\n" +
            "546,133\n" +
            "296,348\n" +
            "1083,124\n" +
            "736,662\n" +
            "30,222\n" +
            "127,589\n" +
            "1007,235\n" +
            "632,558\n" +
            "1293,126\n" +
            "739,548\n" +
            "415,142\n" +
            "719,444\n" +
            "48,256\n" +
            "739,203\n" +
            "584,824\n" +
            "895,478\n" +
            "87,142\n" +
            "3,530\n" +
            "1310,878\n" +
            "248,840\n" +
            "1114,588\n" +
            "1265,653\n" +
            "502,397\n" +
            "25,557\n" +
            "132,884\n" +
            "112,338\n" +
            "391,338\n" +
            "726,130\n" +
            "296,546\n" +
            "1121,869\n" +
            "311,894\n" +
            "959,658\n" +
            "820,739\n" +
            "70,764\n" +
            "1170,446\n" +
            "580,334\n" +
            "92,242\n" +
            "1047,796\n" +
            "79,576\n" +
            "726,764\n" +
            "802,276\n" +
            "1111,418\n" +
            "1141,269\n" +
            "509,490\n" +
            "328,376\n" +
            "480,50\n" +
            "619,324\n" +
            "514,894\n" +
            "438,101\n" +
            "25,337\n" +
            "69,203\n" +
            "684,663\n" +
            "1057,660\n" +
            "900,214\n" +
            "1170,511\n" +
            "1119,656\n" +
            "790,455\n" +
            "1111,476\n" +
            "691,682\n" +
            "522,226\n" +
            "1125,775\n" +
            "952,0\n" +
            "1288,280\n" +
            "299,521\n" +
            "400,238\n" +
            "152,498\n" +
            "199,660\n" +
            "1282,679\n" +
            "232,495\n" +
            "835,694\n" +
            "1235,446\n" +
            "840,36\n" +
            "764,145\n" +
            "899,324\n" +
            "710,749\n" +
            "666,50\n" +
            "619,414\n" +
            "743,542\n" +
            "822,887\n" +
            "691,122\n" +
            "493,598\n" +
            "796,894\n" +
            "422,175\n" +
            "274,793\n" +
            "112,556\n" +
            "87,304\n" +
            "816,248\n" +
            "27,849\n" +
            "252,560\n" +
            "788,674\n" +
            "683,649\n" +
            "426,194\n" +
            "952,884\n" +
            "8,630\n" +
            "738,214\n" +
            "164,656\n" +
            "392,684\n" +
            "1176,872\n" +
            "33,156\n" +
            "351,659\n" +
            "170,112\n" +
            "1202,301\n" +
            "137,64\n" +
            "22,280\n" +
            "1063,766\n" +
            "422,663\n" +
            "743,688\n" +
            "460,682\n" +
            "745,772\n" +
            "1305,269\n" +
            "256,889\n" +
            "1216,663\n" +
            "459,479\n" +
            "358,348\n" +
            "624,546\n" +
            "397,803\n" +
            "108,301\n" +
            "1179,754\n" +
            "170,782\n" +
            "192,694\n" +
            "910,238\n" +
            "1178,835\n" +
            "867,39\n" +
            "359,863\n" +
            "387,747\n" +
            "1146,686\n" +
            "555,796\n" +
            "509,68\n" +
            "852,834\n" +
            "684,625\n" +
            "380,445\n" +
            "0,872\n" +
            "1266,686\n" +
            "683,849\n" +
            "239,309\n" +
            "228,42\n" +
            "10,844\n" +
            "218,749\n" +
            "837,516\n" +
            "710,761\n" +
            "1158,498\n" +
            "480,221\n" +
            "134,539\n" +
            "520,455\n" +
            "1262,638\n" +
            "634,596\n" +
            "195,639\n" +
            "910,432\n" +
            "570,780\n" +
            "1143,252\n" +
            "1230,438\n" +
            "801,378\n" +
            "542,487\n" +
            "278,732\n" +
            "527,73\n" +
            "638,294\n" +
            "299,768\n" +
            "257,91\n" +
            "1200,325\n" +
            "440,91\n" +
            "527,149\n" +
            "1294,180\n" +
            "179,150\n" +
            "570,220\n" +
            "1096,220\n" +
            "216,155\n" +
            "1213,359\n" +
            "212,638\n" +
            "1293,404\n" +
            "867,240\n" +
            "1131,598\n" +
            "1310,872\n" +
            "440,131\n" +
            "918,530\n" +
            "710,145\n" +
            "443,453\n" +
            "740,780\n" +
            "637,880\n" +
            "351,400\n" +
            "243,534\n" +
            "376,633\n" +
            "296,10\n" +
            "830,844\n" +
            "999,448\n" +
            "460,407\n" +
            "97,43\n" +
            "353,779\n" +
            "1015,863\n" +
            "913,91\n" +
            "1200,569\n" +
            "577,817\n" +
            "1231,467\n" +
            "1123,624\n" +
            "1006,504\n" +
            "788,220\n" +
            "427,180\n" +
            "888,175\n" +
            "509,516\n" +
            "274,93\n" +
            "350,504\n" +
            "301,114\n" +
            "952,2\n" +
            "571,346\n" +
            "5,625\n" +
            "475,200\n" +
            "1247,338\n" +
            "189,109\n" +
            "498,122\n" +
            "110,22\n" +
            "35,446\n" +
            "406,215\n" +
            "1305,493\n" +
            "686,346\n" +
            "310,170\n" +
            "994,722\n" +
            "629,450\n" +
            "54,649\n" +
            "1245,51\n" +
            "1283,581\n" +
            "1140,112\n" +
            "32,876\n" +
            "460,507\n" +
            "99,348\n" +
            "350,110\n" +
            "1178,884\n" +
            "766,669\n" +
            "281,877\n" +
            "790,739\n" +
            "1223,752\n" +
            "276,711\n" +
            "0,518\n" +
            "328,518\n" +
            "575,86\n" +
            "295,863\n" +
            "232,623\n" +
            "644,465\n" +
            "72,460\n" +
            "1247,444\n" +
            "627,649\n" +
            "112,108\n" +
            "1185,852\n" +
            "576,728\n" +
            "755,292\n" +
            "651,364\n" +
            "1168,634\n" +
            "1158,396\n" +
            "522,59\n" +
            "1064,179\n" +
            "626,625\n" +
            "868,190\n" +
            "219,443\n" +
            "1163,126\n" +
            "1062,838\n" +
            "629,109\n" +
            "564,572\n" +
            "243,766\n" +
            "1108,40\n" +
            "296,668\n" +
            "580,100\n" +
            "1001,404\n" +
            "801,68\n" +
            "296,98\n" +
            "199,415\n" +
            "999,224\n" +
            "1275,597\n" +
            "1131,50\n" +
            "514,511\n" +
            "999,862\n" +
            "15,234\n" +
            "686,546\n" +
            "975,488\n" +
            "664,406\n" +
            "31,334\n" +
            "1210,560\n" +
            "579,582\n" +
            "830,50\n" +
            "316,749\n" +
            "335,488\n" +
            "274,801\n" +
            "110,577\n" +
            "1001,42\n" +
            "626,231\n" +
            "227,266\n" +
            "152,396\n" +
            "328,464\n" +
            "407,318\n" +
            "1211,546\n" +
            "529,404\n" +
            "502,857\n" +
            "363,448\n" +
            "295,647\n" +
            "229,359\n" +
            "382,749\n" +
            "619,682\n" +
            "580,224\n" +
            "562,738\n" +
            "278,185\n" +
            "818,73\n" +
            "820,131\n" +
            "239,864\n" +
            "606,638\n" +
            "546,145\n" +
            "713,570\n" +
            "1058,560\n" +
            "1056,432\n" +
            "329,324\n" +
            "243,576\n" +
            "900,710\n" +
            "\n" +
            "fold along x=655\n" +
            "fold along y=447\n" +
            "fold along x=327\n" +
            "fold along y=223\n" +
            "fold along x=163\n" +
            "fold along y=111\n" +
            "fold along x=81\n" +
            "fold along y=55\n" +
            "fold along x=40\n" +
            "fold along y=27\n" +
            "fold along y=13\n" +
            "fold along y=6").split("\n"));
}
